#!/usr/bin/env bash

set -Eeuxo pipefail

    docker pull 'nickblah/postgis:14beta3-postgis-3.1.3' || true && docker build --pull --cache-from 'nickblah/postgis:14beta3-postgis-3.1.3' --tag 'nickblah/postgis:14beta3-postgis-3.1.3' --tag 'nickblah/postgis:14beta3-postgis-3.1' --tag 'nickblah/postgis:14beta3-postgis-3' --tag 'nickblah/postgis:14beta3-buster-postgis-3.1.3' --tag 'nickblah/postgis:14beta3-buster-postgis-3.1' --tag 'nickblah/postgis:14beta3-buster-postgis-3' --file 14/buster/postgis-3/Dockerfile .
    docker pull 'nickblah/postgis:13.4-postgis-3.1.4' || true && docker build --pull --cache-from 'nickblah/postgis:13.4-postgis-3.1.4' --tag 'nickblah/postgis:13.4-postgis-3.1.4' --tag 'nickblah/postgis:13.4-postgis-3.1' --tag 'nickblah/postgis:13.4-postgis-3' --tag 'nickblah/postgis:13-postgis-3.1.4' --tag 'nickblah/postgis:13-postgis-3.1' --tag 'nickblah/postgis:13-postgis-3' --tag 'nickblah/postgis:13.4-buster-postgis-3.1.4' --tag 'nickblah/postgis:13.4-buster-postgis-3.1' --tag 'nickblah/postgis:13.4-buster-postgis-3' --tag 'nickblah/postgis:13-buster-postgis-3.1.4' --tag 'nickblah/postgis:13-buster-postgis-3.1' --tag 'nickblah/postgis:13-buster-postgis-3' --tag 'nickblah/postgis:buster-postgis-3.1.4' --tag 'nickblah/postgis:buster-postgis-3.1' --tag 'nickblah/postgis:buster-postgis-3' --tag 'nickblah/postgis:latest' --file 13/buster/postgis-3/Dockerfile .
    docker pull 'nickblah/postgis:13.4-postgis-2.5.5' || true && docker build --pull --cache-from 'nickblah/postgis:13.4-postgis-2.5.5' --tag 'nickblah/postgis:13.4-postgis-2.5.5' --tag 'nickblah/postgis:13.4-postgis-2.5' --tag 'nickblah/postgis:13.4-postgis-2' --tag 'nickblah/postgis:13-postgis-2.5.5' --tag 'nickblah/postgis:13-postgis-2.5' --tag 'nickblah/postgis:13-postgis-2' --tag 'nickblah/postgis:13.4-buster-postgis-2.5.5' --tag 'nickblah/postgis:13.4-buster-postgis-2.5' --tag 'nickblah/postgis:13.4-buster-postgis-2' --tag 'nickblah/postgis:13-buster-postgis-2.5.5' --tag 'nickblah/postgis:13-buster-postgis-2.5' --tag 'nickblah/postgis:13-buster-postgis-2' --tag 'nickblah/postgis:buster-postgis-2.5.5' --tag 'nickblah/postgis:buster-postgis-2.5' --tag 'nickblah/postgis:buster-postgis-2' --file 13/buster/postgis-2.5/Dockerfile .
    docker pull 'nickblah/postgis:12.8-postgis-3.1.4' || true && docker build --pull --cache-from 'nickblah/postgis:12.8-postgis-3.1.4' --tag 'nickblah/postgis:12.8-postgis-3.1.4' --tag 'nickblah/postgis:12.8-postgis-3.1' --tag 'nickblah/postgis:12.8-postgis-3' --tag 'nickblah/postgis:12-postgis-3.1.4' --tag 'nickblah/postgis:12-postgis-3.1' --tag 'nickblah/postgis:12-postgis-3' --tag 'nickblah/postgis:12.8-buster-postgis-3.1.4' --tag 'nickblah/postgis:12.8-buster-postgis-3.1' --tag 'nickblah/postgis:12.8-buster-postgis-3' --tag 'nickblah/postgis:12-buster-postgis-3.1.4' --tag 'nickblah/postgis:12-buster-postgis-3.1' --tag 'nickblah/postgis:12-buster-postgis-3' --file 12/buster/postgis-3/Dockerfile .
    docker pull 'nickblah/postgis:12.8-postgis-2.5.5' || true && docker build --pull --cache-from 'nickblah/postgis:12.8-postgis-2.5.5' --tag 'nickblah/postgis:12.8-postgis-2.5.5' --tag 'nickblah/postgis:12.8-postgis-2.5' --tag 'nickblah/postgis:12.8-postgis-2' --tag 'nickblah/postgis:12-postgis-2.5.5' --tag 'nickblah/postgis:12-postgis-2.5' --tag 'nickblah/postgis:12-postgis-2' --tag 'nickblah/postgis:12.8-buster-postgis-2.5.5' --tag 'nickblah/postgis:12.8-buster-postgis-2.5' --tag 'nickblah/postgis:12.8-buster-postgis-2' --tag 'nickblah/postgis:12-buster-postgis-2.5.5' --tag 'nickblah/postgis:12-buster-postgis-2.5' --tag 'nickblah/postgis:12-buster-postgis-2' --file 12/buster/postgis-2.5/Dockerfile .
    docker pull 'nickblah/postgis:11.13-buster-postgis-3.1.4' || true && docker build --pull --cache-from 'nickblah/postgis:11.13-buster-postgis-3.1.4' --tag 'nickblah/postgis:11.13-buster-postgis-3.1.4' --tag 'nickblah/postgis:11.13-buster-postgis-3.1' --tag 'nickblah/postgis:11.13-buster-postgis-3' --tag 'nickblah/postgis:11-buster-postgis-3.1.4' --tag 'nickblah/postgis:11-buster-postgis-3.1' --tag 'nickblah/postgis:11-buster-postgis-3' --file 11/buster/postgis-3/Dockerfile .
    docker pull 'nickblah/postgis:11.13-buster-postgis-2.5.5' || true && docker build --pull --cache-from 'nickblah/postgis:11.13-buster-postgis-2.5.5' --tag 'nickblah/postgis:11.13-buster-postgis-2.5.5' --tag 'nickblah/postgis:11.13-buster-postgis-2.5' --tag 'nickblah/postgis:11.13-buster-postgis-2' --tag 'nickblah/postgis:11-buster-postgis-2.5.5' --tag 'nickblah/postgis:11-buster-postgis-2.5' --tag 'nickblah/postgis:11-buster-postgis-2' --file 11/buster/postgis-2.5/Dockerfile .
    docker pull 'nickblah/postgis:11.13-postgis-3.1.4' || true && docker build --pull --cache-from 'nickblah/postgis:11.13-postgis-3.1.4' --tag 'nickblah/postgis:11.13-postgis-3.1.4' --tag 'nickblah/postgis:11.13-postgis-3.1' --tag 'nickblah/postgis:11.13-postgis-3' --tag 'nickblah/postgis:11-postgis-3.1.4' --tag 'nickblah/postgis:11-postgis-3.1' --tag 'nickblah/postgis:11-postgis-3' --tag 'nickblah/postgis:11.13-stretch-postgis-3.1.4' --tag 'nickblah/postgis:11.13-stretch-postgis-3.1' --tag 'nickblah/postgis:11.13-stretch-postgis-3' --tag 'nickblah/postgis:11-stretch-postgis-3.1.4' --tag 'nickblah/postgis:11-stretch-postgis-3.1' --tag 'nickblah/postgis:11-stretch-postgis-3' --file 11/stretch/postgis-3/Dockerfile .
    docker pull 'nickblah/postgis:11.13-postgis-2.5.5' || true && docker build --pull --cache-from 'nickblah/postgis:11.13-postgis-2.5.5' --tag 'nickblah/postgis:11.13-postgis-2.5.5' --tag 'nickblah/postgis:11.13-postgis-2.5' --tag 'nickblah/postgis:11.13-postgis-2' --tag 'nickblah/postgis:11-postgis-2.5.5' --tag 'nickblah/postgis:11-postgis-2.5' --tag 'nickblah/postgis:11-postgis-2' --tag 'nickblah/postgis:11.13-stretch-postgis-2.5.5' --tag 'nickblah/postgis:11.13-stretch-postgis-2.5' --tag 'nickblah/postgis:11.13-stretch-postgis-2' --tag 'nickblah/postgis:11-stretch-postgis-2.5.5' --tag 'nickblah/postgis:11-stretch-postgis-2.5' --tag 'nickblah/postgis:11-stretch-postgis-2' --file 11/stretch/postgis-2.5/Dockerfile .
    docker pull 'nickblah/postgis:10.18-buster-postgis-3.1.4' || true && docker build --pull --cache-from 'nickblah/postgis:10.18-buster-postgis-3.1.4' --tag 'nickblah/postgis:10.18-buster-postgis-3.1.4' --tag 'nickblah/postgis:10.18-buster-postgis-3.1' --tag 'nickblah/postgis:10.18-buster-postgis-3' --tag 'nickblah/postgis:10-buster-postgis-3.1.4' --tag 'nickblah/postgis:10-buster-postgis-3.1' --tag 'nickblah/postgis:10-buster-postgis-3' --file 10/buster/postgis-3/Dockerfile .
    docker pull 'nickblah/postgis:10.18-buster-postgis-2.5.5' || true && docker build --pull --cache-from 'nickblah/postgis:10.18-buster-postgis-2.5.5' --tag 'nickblah/postgis:10.18-buster-postgis-2.5.5' --tag 'nickblah/postgis:10.18-buster-postgis-2.5' --tag 'nickblah/postgis:10.18-buster-postgis-2' --tag 'nickblah/postgis:10-buster-postgis-2.5.5' --tag 'nickblah/postgis:10-buster-postgis-2.5' --tag 'nickblah/postgis:10-buster-postgis-2' --file 10/buster/postgis-2.5/Dockerfile .
    docker pull 'nickblah/postgis:10.18-buster-postgis-2.4.4' || true && docker build --pull --cache-from 'nickblah/postgis:10.18-buster-postgis-2.4.4' --tag 'nickblah/postgis:10.18-buster-postgis-2.4.4' --tag 'nickblah/postgis:10.18-buster-postgis-2.4' --tag 'nickblah/postgis:10-buster-postgis-2.4.4' --tag 'nickblah/postgis:10-buster-postgis-2.4' --file 10/buster/postgis-2.4/Dockerfile .
    docker pull 'nickblah/postgis:10.18-postgis-3.1.4' || true && docker build --pull --cache-from 'nickblah/postgis:10.18-postgis-3.1.4' --tag 'nickblah/postgis:10.18-postgis-3.1.4' --tag 'nickblah/postgis:10.18-postgis-3.1' --tag 'nickblah/postgis:10.18-postgis-3' --tag 'nickblah/postgis:10-postgis-3.1.4' --tag 'nickblah/postgis:10-postgis-3.1' --tag 'nickblah/postgis:10-postgis-3' --tag 'nickblah/postgis:10.18-stretch-postgis-3.1.4' --tag 'nickblah/postgis:10.18-stretch-postgis-3.1' --tag 'nickblah/postgis:10.18-stretch-postgis-3' --tag 'nickblah/postgis:10-stretch-postgis-3.1.4' --tag 'nickblah/postgis:10-stretch-postgis-3.1' --tag 'nickblah/postgis:10-stretch-postgis-3' --file 10/stretch/postgis-3/Dockerfile .
    docker pull 'nickblah/postgis:10.18-postgis-2.5.5' || true && docker build --pull --cache-from 'nickblah/postgis:10.18-postgis-2.5.5' --tag 'nickblah/postgis:10.18-postgis-2.5.5' --tag 'nickblah/postgis:10.18-postgis-2.5' --tag 'nickblah/postgis:10.18-postgis-2' --tag 'nickblah/postgis:10-postgis-2.5.5' --tag 'nickblah/postgis:10-postgis-2.5' --tag 'nickblah/postgis:10-postgis-2' --tag 'nickblah/postgis:10.18-stretch-postgis-2.5.5' --tag 'nickblah/postgis:10.18-stretch-postgis-2.5' --tag 'nickblah/postgis:10.18-stretch-postgis-2' --tag 'nickblah/postgis:10-stretch-postgis-2.5.5' --tag 'nickblah/postgis:10-stretch-postgis-2.5' --tag 'nickblah/postgis:10-stretch-postgis-2' --file 10/stretch/postgis-2.5/Dockerfile .
    docker pull 'nickblah/postgis:10.18-postgis-2.4.4' || true && docker build --pull --cache-from 'nickblah/postgis:10.18-postgis-2.4.4' --tag 'nickblah/postgis:10.18-postgis-2.4.4' --tag 'nickblah/postgis:10.18-postgis-2.4' --tag 'nickblah/postgis:10-postgis-2.4.4' --tag 'nickblah/postgis:10-postgis-2.4' --tag 'nickblah/postgis:10.18-stretch-postgis-2.4.4' --tag 'nickblah/postgis:10.18-stretch-postgis-2.4' --tag 'nickblah/postgis:10-stretch-postgis-2.4.4' --tag 'nickblah/postgis:10-stretch-postgis-2.4' --file 10/stretch/postgis-2.4/Dockerfile .
    docker pull 'nickblah/postgis:9.6.23-buster-postgis-3.1.4' || true && docker build --pull --cache-from 'nickblah/postgis:9.6.23-buster-postgis-3.1.4' --tag 'nickblah/postgis:9.6.23-buster-postgis-3.1.4' --tag 'nickblah/postgis:9.6.23-buster-postgis-3.1' --tag 'nickblah/postgis:9.6.23-buster-postgis-3' --tag 'nickblah/postgis:9.6-buster-postgis-3.1.4' --tag 'nickblah/postgis:9.6-buster-postgis-3.1' --tag 'nickblah/postgis:9.6-buster-postgis-3' --tag 'nickblah/postgis:9-buster-postgis-3.1.4' --tag 'nickblah/postgis:9-buster-postgis-3.1' --tag 'nickblah/postgis:9-buster-postgis-3' --file 9.6/buster/postgis-3/Dockerfile .
    docker pull 'nickblah/postgis:9.6.23-buster-postgis-2.5.5' || true && docker build --pull --cache-from 'nickblah/postgis:9.6.23-buster-postgis-2.5.5' --tag 'nickblah/postgis:9.6.23-buster-postgis-2.5.5' --tag 'nickblah/postgis:9.6.23-buster-postgis-2.5' --tag 'nickblah/postgis:9.6.23-buster-postgis-2' --tag 'nickblah/postgis:9.6-buster-postgis-2.5.5' --tag 'nickblah/postgis:9.6-buster-postgis-2.5' --tag 'nickblah/postgis:9.6-buster-postgis-2' --tag 'nickblah/postgis:9-buster-postgis-2.5.5' --tag 'nickblah/postgis:9-buster-postgis-2.5' --tag 'nickblah/postgis:9-buster-postgis-2' --file 9.6/buster/postgis-2.5/Dockerfile .
    docker pull 'nickblah/postgis:9.6.23-buster-postgis-2.4.4' || true && docker build --pull --cache-from 'nickblah/postgis:9.6.23-buster-postgis-2.4.4' --tag 'nickblah/postgis:9.6.23-buster-postgis-2.4.4' --tag 'nickblah/postgis:9.6.23-buster-postgis-2.4' --tag 'nickblah/postgis:9.6-buster-postgis-2.4.4' --tag 'nickblah/postgis:9.6-buster-postgis-2.4' --tag 'nickblah/postgis:9-buster-postgis-2.4.4' --tag 'nickblah/postgis:9-buster-postgis-2.4' --file 9.6/buster/postgis-2.4/Dockerfile .
    docker pull 'nickblah/postgis:9.6.23-postgis-3.1.4' || true && docker build --pull --cache-from 'nickblah/postgis:9.6.23-postgis-3.1.4' --tag 'nickblah/postgis:9.6.23-postgis-3.1.4' --tag 'nickblah/postgis:9.6.23-postgis-3.1' --tag 'nickblah/postgis:9.6.23-postgis-3' --tag 'nickblah/postgis:9.6-postgis-3.1.4' --tag 'nickblah/postgis:9.6-postgis-3.1' --tag 'nickblah/postgis:9.6-postgis-3' --tag 'nickblah/postgis:9-postgis-3.1.4' --tag 'nickblah/postgis:9-postgis-3.1' --tag 'nickblah/postgis:9-postgis-3' --tag 'nickblah/postgis:9.6.23-stretch-postgis-3.1.4' --tag 'nickblah/postgis:9.6.23-stretch-postgis-3.1' --tag 'nickblah/postgis:9.6.23-stretch-postgis-3' --tag 'nickblah/postgis:9.6-stretch-postgis-3.1.4' --tag 'nickblah/postgis:9.6-stretch-postgis-3.1' --tag 'nickblah/postgis:9.6-stretch-postgis-3' --tag 'nickblah/postgis:9-stretch-postgis-3.1.4' --tag 'nickblah/postgis:9-stretch-postgis-3.1' --tag 'nickblah/postgis:9-stretch-postgis-3' --file 9.6/stretch/postgis-3/Dockerfile .
    docker pull 'nickblah/postgis:9.6.23-postgis-2.5.5' || true && docker build --pull --cache-from 'nickblah/postgis:9.6.23-postgis-2.5.5' --tag 'nickblah/postgis:9.6.23-postgis-2.5.5' --tag 'nickblah/postgis:9.6.23-postgis-2.5' --tag 'nickblah/postgis:9.6.23-postgis-2' --tag 'nickblah/postgis:9.6-postgis-2.5.5' --tag 'nickblah/postgis:9.6-postgis-2.5' --tag 'nickblah/postgis:9.6-postgis-2' --tag 'nickblah/postgis:9-postgis-2.5.5' --tag 'nickblah/postgis:9-postgis-2.5' --tag 'nickblah/postgis:9-postgis-2' --tag 'nickblah/postgis:9.6.23-stretch-postgis-2.5.5' --tag 'nickblah/postgis:9.6.23-stretch-postgis-2.5' --tag 'nickblah/postgis:9.6.23-stretch-postgis-2' --tag 'nickblah/postgis:9.6-stretch-postgis-2.5.5' --tag 'nickblah/postgis:9.6-stretch-postgis-2.5' --tag 'nickblah/postgis:9.6-stretch-postgis-2' --tag 'nickblah/postgis:9-stretch-postgis-2.5.5' --tag 'nickblah/postgis:9-stretch-postgis-2.5' --tag 'nickblah/postgis:9-stretch-postgis-2' --file 9.6/stretch/postgis-2.5/Dockerfile .
    docker pull 'nickblah/postgis:9.6.23-postgis-2.4.4' || true && docker build --pull --cache-from 'nickblah/postgis:9.6.23-postgis-2.4.4' --tag 'nickblah/postgis:9.6.23-postgis-2.4.4' --tag 'nickblah/postgis:9.6.23-postgis-2.4' --tag 'nickblah/postgis:9.6-postgis-2.4.4' --tag 'nickblah/postgis:9.6-postgis-2.4' --tag 'nickblah/postgis:9-postgis-2.4.4' --tag 'nickblah/postgis:9-postgis-2.4' --tag 'nickblah/postgis:9.6.23-stretch-postgis-2.4.4' --tag 'nickblah/postgis:9.6.23-stretch-postgis-2.4' --tag 'nickblah/postgis:9.6-stretch-postgis-2.4.4' --tag 'nickblah/postgis:9.6-stretch-postgis-2.4' --tag 'nickblah/postgis:9-stretch-postgis-2.4.4' --tag 'nickblah/postgis:9-stretch-postgis-2.4' --file 9.6/stretch/postgis-2.4/Dockerfile .
    docker pull 'nickblah/postgis:9.6.23-postgis-2.3.3' || true && docker build --pull --cache-from 'nickblah/postgis:9.6.23-postgis-2.3.3' --tag 'nickblah/postgis:9.6.23-postgis-2.3.3' --tag 'nickblah/postgis:9.6.23-postgis-2.3' --tag 'nickblah/postgis:9.6-postgis-2.3.3' --tag 'nickblah/postgis:9.6-postgis-2.3' --tag 'nickblah/postgis:9-postgis-2.3.3' --tag 'nickblah/postgis:9-postgis-2.3' --tag 'nickblah/postgis:9.6.23-stretch-postgis-2.3.3' --tag 'nickblah/postgis:9.6.23-stretch-postgis-2.3' --tag 'nickblah/postgis:9.6-stretch-postgis-2.3.3' --tag 'nickblah/postgis:9.6-stretch-postgis-2.3' --tag 'nickblah/postgis:9-stretch-postgis-2.3.3' --tag 'nickblah/postgis:9-stretch-postgis-2.3' --file 9.6/stretch/postgis-2.3/Dockerfile .
